<?xml version="1.0" encoding="UTF-8"?>
<!-- Do not edit this file with editors other than diagrams.net -->
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" width="1541px" height="1624px" viewBox="-0.5 -0.5 1541 1624" content="&lt;mxfile host=&quot;app.diagrams.net&quot; modified=&quot;2022-11-30T08:23:20.761Z&quot; agent=&quot;5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/107.0.0.0 Safari/537.36&quot; etag=&quot;9n9xfW0GsFh7AKn5F_mT&quot; version=&quot;20.6.0&quot; type=&quot;device&quot;&gt;&lt;diagram id=&quot;z9_j1k-EOPL9OoXTObUC&quot; name=&quot;Page-1&quot;&gt;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&lt;/diagram&gt;&lt;/mxfile&gt;" style="background-color: rgb(255, 255, 255);"><defs/><g><rect x="0" y="0" width="500" height="200" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 484px; height: 1px; padding-top: 7px; margin-left: 9px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: left;"><div style="display: inline-block; font-size: 14px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;"><p style="line-height: 0.9; font-size: 14px;"></p><div style="font-size: 14px;"><b>Functional</b></div><div style="font-size: 14px;">1. 搜索文字，显示搜索建议</div><div style="font-size: 14px;">2. 针对特定类别进行搜索（图片，地点，视频，新闻）</div><div style="font-size: 14px;"><br /></div><div style="font-size: 14px;"><br /></div><div style="font-size: 14px;"><b>Non-functional</b></div><div style="font-size: 14px;">1. Low Latency: 搜索以及搜索建议时保证低延迟</div><div style="font-size: 14px;">2. High Availability: 确保整个系统的高可用</div><div style="font-size: 14px;">3. High Scalability: 确保整个系统的高扩展性</div><br /><p style="font-size: 14px;"></p></div></div></div></foreignObject><text x="9" y="21" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="14px">Functional...</text></switch></g><rect x="0" y="210" width="500" height="260" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 484px; height: 1px; padding-top: 217px; margin-left: 9px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: left;"><div style="display: inline-block; font-size: 14px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;"><p style="line-height: 0.9; font-size: 14px;"></p><div style=""><div style=""><div style=""><b>Capacity Estimation (Optional)</b><br /></div><div style=""><b><br /></b></div><div style=""><b>QPS</b></div><div style="font-size: 14px;">假设：</div><div style="font-size: 14px;"><span style="white-space: pre;">	</span>每天 10 亿次搜索</div><div style="font-size: 14px;">结论：</div><div style="font-size: 14px;"><span style="white-space: pre;">	</span>系统需要支撑 10,000 QPS<span style="background-color: initial;"> </span></div><div style="font-size: 14px;"><span style="background-color: initial;"><br /></span></div><div style="font-size: 14px;"><span style="background-color: initial;"><b>Storage</b></span></div><div style="font-size: 14px;"><span style="background-color: initial;">假设：</span></div><div style="font-size: 14px;"><span style="background-color: initial;"><span style="white-space: pre;">	</span>每天新增 10 亿个资源，平均每个资源占用索引空间为 10 Bytes</span></div><div style="font-size: 14px;">结论：</div><div style="font-size: 14px;"><span style="white-space: pre;">	</span>每天新增存储约为 10 Gb<br /></div><div style="font-size: 14px;"><br /></div><div style=""><span style="background-color: initial;"><b><br /></b></span></div><div style="font-size: 14px;"><span style="background-color: initial;"> </span></div></div></div><p style="font-size: 14px;"></p></div></div></div></foreignObject><text x="9" y="231" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="14px">Capacity Estimation (Optional)...</text></switch></g><rect x="0" y="480" width="500" height="540" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 484px; height: 1px; padding-top: 487px; margin-left: 9px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: left;"><div style="display: inline-block; font-size: 14px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;"><p style="line-height: 0.9; font-size: 14px;"></p><div style=""><div style=""><div style=""><b style="background-color: initial;">练习与总结</b></div><div style=""><b style="background-color: initial;"><br /></b></div><div style=""><b style="background-color: initial;">Key points</b><br /></div><div style=""><div>- <span style="background-color: initial;">匹配：使用 </span><span style="background-color: initial;">Inverted</span><span style="background-color: initial;"> Index 存储资源</span></div><div>- 排名：使用 NLP 语义分析，个性化匹配，PageRank 对资源进行排序</div><div>- 缓存热门搜索内容</div><div>- 使用图数据库保存资源关系</div><div><br /></div></div><div><div><b style="background-color: initial;">Patterns</b><br /></div><div>- <span style="background-color: initial;">Cache-Aside pattern: 缓存热门搜索内容</span></div></div><div><span style="background-color: initial;">- </span><span style="background-color: initial;">Index Table pattern: 高效建立索引，压缩 position list 的存储空间</span></div><div><span style="background-color: initial;">- </span><span style="background-color: initial;">Saga distributed transactions pattern: 保证在微服务中的事务一致性</span></div><div style=""><b><br /></b></div><div><b>Real Life Architectures</b></div><div style=""><span style="background-color: initial;">- Blog: </span><span style="background-color: initial;">Under the Hood: Indexing and ranking in Graph Search</span></div><div style=""><span style="background-color: initial;">- Blog: </span><span style="background-color: initial;">Manas: A high performing customized search system</span></div><div><span style="background-color: initial;">- Blog: </span><span style="background-color: initial;">Manas Realtime — Enabling changes to be searchable in a blink of an eye</span></div><div><br /></div><div><div><b>Similar applications</b></div><div>- GEO base: 都有匹配功能，需要匹配最合适的资源（图片/司机）</div></div></div></div><p style="font-size: 14px;"></p></div></div></div></foreignObject><text x="9" y="501" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="14px">练习与总结Key points...</text></switch></g><rect x="510" y="0" width="1030" height="1020" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="all"/><rect x="520" y="390" width="1010" height="60" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 994px; height: 1px; padding-top: 397px; margin-left: 529px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: left;"><div style="display: inline-block; font-size: 14px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;"><p style="line-height: 0.9; font-size: 14px;"></p><div style=""><div style=""><div style="">1. Data processing Server 从 Database 以及实时的 Data Stream 中获取数据进行分析以及拆分，并且存储到 Index Database 中</div><div style="font-size: 14px;"><br /></div></div></div><p style="font-size: 14px;"></p></div></div></div></foreignObject><text x="529" y="411" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="14px">1. Data processing Server 从 Database 以及实时的 Data Stream 中获取数据进行分析以及拆分，并且存储到 Index Database 中...</text></switch></g><rect x="0" y="1030" width="500" height="380" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 491px; height: 1px; padding-top: 1037px; margin-left: 9px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: left;"><div style="display: inline-block; font-size: 14px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;"><p style="line-height: 0.9; font-size: 14px;"></p><div style="font-size: 16px;"><div style=""><div style=""><b>API Design</b></div><div style=""><b><br /></b></div><div style="">method: POST</div><div style="">https://example.com/api/v1/index/</div><div style=""><b><br /></b></div><div style=""><div>index(text)</div><div><span style="">	</span><span style="">	</span><span style="">	</span><span style="white-space: pre;">	</span>partition_id, inverted_index = processing(text)</div><div><span style="">	</span><span style="white-space: pre;">	</span>index_database.store(<span style="background-color: initial;">partition_id, inverted_index)</span><br /></div><div>        return status</div><div><br /></div><div><div>method: GET</div><div>https://example.com/api/v1/resources/?query=text</div></div><div><br /></div></div><div style="">query(text, user_id, location, settings)</div><div style=""><span style="">	</span><span style="">	</span><span style="">	</span><span style="">	</span><span style="">	</span><span style="">	</span><span style="">	</span><span style="white-space: pre;">	</span>cleaned_text = analyzer(text)</div><div style=""><span style="">	</span><span style="">	</span><span style="">	</span><span style="">	</span><span style="">	</span><span style="white-space: pre;">	</span>res = blender_server.query(</div><div style="">        <span style="white-space: pre;">	</span><span style="">	</span><span style="">	</span><span style="">	</span>user_id, location, settings, cleaned_text)</div><div style="">        return res</div><div style=""><br /></div><div style=""><br /></div></div></div><div style="font-size: 16px;"><div style=""><div style=""><span style="background-color: initial;"><span style="">	</span></span></div><div style=""><br /></div><div style=""><span style="background-color: initial;"><br /></span></div><div style=""><span style="background-color: initial;"><br /></span></div><div style=""><span style="">	</span><span style="">	</span><br /></div></div></div><p style="font-size: 14px;"></p></div></div></div></foreignObject><text x="9" y="1051" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="14px">API Design...</text></switch></g><rect x="510" y="1030" width="1030" height="380" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 1021px; height: 1px; padding-top: 1037px; margin-left: 519px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: left;"><div style="display: inline-block; font-size: 14px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;"><p style="line-height: 0.9; font-size: 14px;"></p><div style=""><div style=""><div style=""><br /></div></div></div><p style="font-size: 14px;"></p></div></div></div></foreignObject><text x="519" y="1051" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="14px">...</text></switch></g><rect x="520" y="20" width="128.75" height="30" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 127px; height: 1px; padding-top: 35px; margin-left: 521px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 16px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; font-weight: bold; white-space: normal; overflow-wrap: normal;">更新</div></div></div></foreignObject><text x="584" y="40" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="16px" text-anchor="middle" font-weight="bold">更新</text></switch></g><path d="M 530 1080 L 530 1050 L 1520 1050 L 1520 1080" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/><path d="M 530 1080 L 530 1175 L 1520 1175 L 1520 1080" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><path d="M 530 1080 L 1520 1080" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><path d="M 750 1080 L 750 1105 L 750 1135 L 750 1165" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><g fill="rgb(0, 0, 0)" font-family="Helvetica" font-weight="bold" pointer-events="none" text-anchor="middle" font-size="14px"><text x="1024.5" y="1070.5">Geo (NoSQL)</text></g><path d="M 530 1080 M 750 1080 M 750 1105 M 530 1105" fill="none" stroke="rgb(0, 0, 0)" stroke-linecap="square" stroke-miterlimit="10" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 218px; height: 1px; padding-top: 1093px; margin-left: 531px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center; max-height: 21px; overflow: hidden;"><div style="display: inline-block; font-size: 14px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: none; white-space: normal; overflow-wrap: normal;">term</div></div></div></foreignObject><text x="640" y="1097" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="14px" text-anchor="middle">term</text></switch></g><path d="M 750 1080 M 1520 1080 M 1520 1105 M 750 1105" fill="none" stroke="rgb(0, 0, 0)" stroke-linecap="square" stroke-miterlimit="10" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 762px; height: 1px; padding-top: 1093px; margin-left: 758px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: left; max-height: 21px; overflow: hidden;"><div style="display: inline-block; font-size: 14px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: none; white-space: normal; overflow-wrap: normal;">position_id, position_id2, position_id3, etc.</div></div></div></foreignObject><text x="758" y="1097" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="14px">position_id, position_id2, position_id3, etc.</text></switch></g><path d="M 530 1105 M 750 1105 M 750 1135 M 530 1135" fill="none" stroke="rgb(0, 0, 0)" stroke-linecap="square" stroke-miterlimit="10" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 218px; height: 1px; padding-top: 1120px; margin-left: 531px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center; max-height: 26px; overflow: hidden;"><div style="display: inline-block; font-size: 14px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: none; white-space: normal; overflow-wrap: normal;">term</div></div></div></foreignObject><text x="640" y="1124" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="14px" text-anchor="middle">term</text></switch></g><path d="M 750 1105 M 1520 1105 M 1520 1135 M 750 1135" fill="none" stroke="rgb(0, 0, 0)" stroke-linecap="square" stroke-miterlimit="10" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 762px; height: 1px; padding-top: 1120px; margin-left: 758px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: left; max-height: 26px; overflow: hidden;"><div style="display: inline-block; font-size: 14px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: none; white-space: normal; overflow-wrap: normal;">position_id, position_id2, position_id3, etc.</div></div></div></foreignObject><text x="758" y="1124" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="14px">position_id, position_id2, position_id3, etc.</text></switch></g><path d="M 530 1135 M 750 1135 M 750 1165 M 530 1165" fill="none" stroke="rgb(0, 0, 0)" stroke-linecap="square" stroke-miterlimit="10" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 218px; height: 1px; padding-top: 1150px; margin-left: 531px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center; max-height: 26px; overflow: hidden;"><div style="display: inline-block; font-size: 14px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: none; white-space: normal; overflow-wrap: normal;">term</div></div></div></foreignObject><text x="640" y="1154" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="14px" text-anchor="middle">term</text></switch></g><path d="M 750 1135 M 1520 1135 M 1520 1165 M 750 1165" fill="none" stroke="rgb(0, 0, 0)" stroke-linecap="square" stroke-miterlimit="10" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 762px; height: 1px; padding-top: 1150px; margin-left: 758px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: left; max-height: 26px; overflow: hidden;"><div style="display: inline-block; font-size: 14px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: none; white-space: normal; overflow-wrap: normal;">position_id, position_id2, position_id3, etc.</div></div></div></foreignObject><text x="758" y="1154" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="14px">position_id, position_id2, position_id3, etc.</text></switch></g><rect x="0" y="1420" width="1540" height="170" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 1531px; height: 1px; padding-top: 1427px; margin-left: 9px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: left;"><div style="display: inline-block; font-size: 14px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: none; white-space: normal; overflow-wrap: normal;"><p style="line-height: 0.9; font-size: 14px;"></p><div style=""><div style=""><div style=""><font style="font-size: 14px;"><b>  </b></font><b style="background-color: initial;">Explain</b></div><div style=""><b style="background-color: initial;"><br /></b></div><div style=""><b style="background-color: initial;"> </b><span style="background-color: initial;"> 1.如何减少 Inverted index 的存储空间</span></div><div style=""><span style="background-color: initial;">    请浏览：</span><span style="background-color: initial;">https://blog.twitter.com/engineering/en_us/topics/infrastructure/2016/omnisearch-index-formats</span></div><div style=""><span style="background-color: initial;">  2. 为什么不使用 A</span><span style="background-color: initial;">pache Lucene，而自己重新设计一套索引和搜索的系统？优势是什么？</span></div><div style=""><span style="background-color: initial;">    LinkedIn, Twitter, Netflix 一开始使用的是 Apache Lucene，后来由于业务增长与业务复杂性提高，转向了自己设计的系统，优势在 </span><span style="background-color: initial;">https://medium.com/pinterest-engineering/manas-realtime-enabling-changes-to-be-searchable-in-a-blink-of-an-eye-36acc3506843 以及 </span><span style="background-color: initial;">https://www.youtube.com/watch?v=AguWva8P_DI&amp;t=2850 有比较详细的解释</span></div><div style=""><span style="background-color: initial;">      </span></div><div style=""><span style="background-color: initial;">      </span></div><div><span style="background-color: initial;"><br /></span></div></div></div><p style="font-size: 14px;"></p></div></div></div></foreignObject><text x="9" y="1441" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="14px">Explain...</text></switch></g><path d="M 940 214.8 L 1015.2 214.8 L 1015.2 294.8 L 1083.63 294.92" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><path d="M 1088.88 294.93 L 1081.88 298.42 L 1083.63 294.92 L 1081.89 291.42 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><path d="M 940 214.8 L 1015.2 214.8 L 1015.2 134.8 L 1083.63 134.92" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><path d="M 1088.88 134.93 L 1081.88 138.42 L 1083.63 134.92 L 1081.89 131.42 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><rect x="820" y="184.93" width="120" height="60" rx="13.2" ry="13.2" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 215px; margin-left: 821px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 14px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: none; white-space: normal; overflow-wrap: normal;"><div>Data processing Server</div></div></div></div></foreignObject><text x="880" y="219" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="14px" text-anchor="middle">Data processing S...</text></switch></g><path d="M 1090 104.93 C 1090 96.65 1114.62 89.93 1145 89.93 C 1159.59 89.93 1173.58 91.51 1183.89 94.32 C 1194.21 97.14 1200 100.95 1200 104.93 L 1200 164.93 C 1200 173.21 1175.38 179.93 1145 179.93 C 1114.62 179.93 1090 173.21 1090 164.93 Z" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><path d="M 1200 104.93 C 1200 113.21 1175.38 119.93 1145 119.93 C 1114.62 119.93 1090 113.21 1090 104.93" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 108px; height: 1px; padding-top: 145px; margin-left: 1091px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 14px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: none; white-space: normal; overflow-wrap: normal;">Index Database</div></div></div></foreignObject><text x="1145" y="149" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="14px" text-anchor="middle">Index Database</text></switch></g><path d="M 663 140 L 730 140 L 730 214.8 L 813.63 214.92" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><path d="M 818.88 214.93 L 811.88 218.42 L 813.63 214.92 L 811.89 211.42 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><path d="M 553 109.93 C 553 101.65 577.62 94.93 608 94.93 C 622.59 94.93 636.58 96.51 646.89 99.32 C 657.21 102.14 663 105.95 663 109.93 L 663 169.93 C 663 178.21 638.38 184.93 608 184.93 C 577.62 184.93 553 178.21 553 169.93 Z" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><path d="M 663 109.93 C 663 118.21 638.38 124.93 608 124.93 C 577.62 124.93 553 118.21 553 109.93" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 108px; height: 1px; padding-top: 150px; margin-left: 554px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 14px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: none; white-space: normal; overflow-wrap: normal;">Database</div></div></div></foreignObject><text x="608" y="154" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="14px" text-anchor="middle">Database</text></switch></g><path d="M 637.78 709.93 L 683.63 709.93" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><path d="M 688.88 709.93 L 681.88 713.43 L 683.63 709.93 L 681.88 706.43 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><ellipse cx="597.78" cy="709.93" rx="40" ry="40" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 78px; height: 1px; padding-top: 710px; margin-left: 559px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 14px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: none; white-space: normal; overflow-wrap: normal;">Client</div></div></div></foreignObject><text x="598" y="714" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="14px" text-anchor="middle">Client</text></switch></g><path d="M 810 709.93 L 853.63 709.93" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><path d="M 858.88 709.93 L 851.88 713.43 L 853.63 709.93 L 851.88 706.43 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><rect x="690" y="679.93" width="120" height="60" rx="13.2" ry="13.2" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 710px; margin-left: 691px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 14px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: none; white-space: normal; overflow-wrap: normal;">API Gateway</div></div></div></foreignObject><text x="750" y="714" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="14px" text-anchor="middle">API Gateway</text></switch></g><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 127px; height: 1px; padding-top: 505px; margin-left: 534px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 16px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: none; font-weight: bold; white-space: normal; overflow-wrap: normal;">匹配与排名</div></div></div></foreignObject><text x="598" y="510" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="16px" text-anchor="middle" font-weight="bold">匹配与排名</text></switch></g><rect x="520" y="940" width="1010" height="70" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 994px; height: 1px; padding-top: 947px; margin-left: 529px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: left;"><div style="display: inline-block; font-size: 14px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: none; white-space: normal; overflow-wrap: normal;"><p style="line-height: 0.9; font-size: 14px;"></p><div style=""><div style=""><div style="">1. Client 进行搜索，<span style="text-align: center; background-color: initial;">Query Analyzer Server 会对搜索内容进行修正，分析，然后请求 </span><span style="text-align: center; background-color: initial;">Blender Server，Blender Server 根据搜索内容从 Index Database 中获取对应的搜索内容，并且根据 Client 信息进行个性化排序，返回结果到 Client。</span></div><div style="font-size: 14px;"><br /></div></div></div><p style="font-size: 14px;"></p></div></div></div></foreignObject><text x="529" y="961" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="14px">1. Client 进行搜索，Query Analyzer Server 会对搜索内容进行修正，分析，然后请求 Blender Server，Blender Server 根据搜索内容从 Index Database 中获取对应的搜索内容，并且根据 Client 信息进行个性化排序，返回结果到 Client。...</text></switch></g><path d="M 673 280 L 730 280 L 730 214.8 L 813.63 214.92" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><path d="M 818.88 214.93 L 811.88 218.42 L 813.63 214.92 L 811.89 211.42 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><rect x="540" y="250" width="133" height="70" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="none"/><path d="M 553 250 L 553 320 M 660 250 L 660 320" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 103px; height: 1px; padding-top: 285px; margin-left: 553px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: none; white-space: normal; overflow-wrap: normal;"><font style="font-size: 14px;">Data Stream</font></div></div></div></foreignObject><text x="605" y="289" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle">Data Stream</text></switch></g><path d="M 1090 264.93 C 1090 256.65 1114.62 249.93 1145 249.93 C 1159.59 249.93 1173.58 251.51 1183.89 254.32 C 1194.21 257.14 1200 260.95 1200 264.93 L 1200 324.93 C 1200 333.21 1175.38 339.93 1145 339.93 C 1114.62 339.93 1090 333.21 1090 324.93 Z" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><path d="M 1200 264.93 C 1200 273.21 1175.38 279.93 1145 279.93 C 1114.62 279.93 1090 273.21 1090 264.93" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 108px; height: 1px; padding-top: 305px; margin-left: 1091px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 14px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: none; white-space: normal; overflow-wrap: normal;">Index Database</div></div></div></foreignObject><text x="1145" y="309" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="14px" text-anchor="middle">Index Database</text></switch></g><path d="M 980 709.93 L 1023.63 709.93" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><path d="M 1028.88 709.93 L 1021.88 713.43 L 1023.63 709.93 L 1021.88 706.43 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><rect x="860" y="679.93" width="120" height="60" rx="13.2" ry="13.2" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 710px; margin-left: 861px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 14px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: none; white-space: normal; overflow-wrap: normal;"><div>Query Analyzer Server</div></div></div></div></foreignObject><text x="920" y="714" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="14px" text-anchor="middle">Query Analyzer Se...</text></switch></g><path d="M 1150 710 L 1180 710 L 1180 630 L 1203.63 629.94" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><path d="M 1208.88 629.93 L 1201.89 633.45 L 1203.63 629.94 L 1201.87 626.45 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><path d="M 1150 710 L 1180 710 L 1180 784.8 L 1203.63 784.9" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><path d="M 1208.88 784.93 L 1201.87 788.39 L 1203.63 784.9 L 1201.9 781.39 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><rect x="1030" y="679.93" width="120" height="60" rx="13.2" ry="13.2" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 710px; margin-left: 1031px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 14px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: none; white-space: normal; overflow-wrap: normal;"><div>Blender Server</div></div></div></div></foreignObject><text x="1090" y="714" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="14px" text-anchor="middle">Blender Server</text></switch></g><path d="M 1210 599.93 C 1210 591.65 1234.62 584.93 1265 584.93 C 1279.59 584.93 1293.58 586.51 1303.89 589.32 C 1314.21 592.14 1320 595.95 1320 599.93 L 1320 659.93 C 1320 668.21 1295.38 674.93 1265 674.93 C 1234.62 674.93 1210 668.21 1210 659.93 Z" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><path d="M 1320 599.93 C 1320 608.21 1295.38 614.93 1265 614.93 C 1234.62 614.93 1210 608.21 1210 599.93" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 108px; height: 1px; padding-top: 640px; margin-left: 1211px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 14px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: none; white-space: normal; overflow-wrap: normal;">Index Database</div></div></div></foreignObject><text x="1265" y="644" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="14px" text-anchor="middle">Index Database</text></switch></g><path d="M 1210 754.93 C 1210 746.65 1234.62 739.93 1265 739.93 C 1279.59 739.93 1293.58 741.51 1303.89 744.32 C 1314.21 747.14 1320 750.95 1320 754.93 L 1320 814.93 C 1320 823.21 1295.38 829.93 1265 829.93 C 1234.62 829.93 1210 823.21 1210 814.93 Z" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><path d="M 1320 754.93 C 1320 763.21 1295.38 769.93 1265 769.93 C 1234.62 769.93 1210 763.21 1210 754.93" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 108px; height: 1px; padding-top: 795px; margin-left: 1211px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 14px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: none; white-space: normal; overflow-wrap: normal;">Index Database</div></div></div></foreignObject><text x="1265" y="799" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="14px" text-anchor="middle">Index Database</text></switch></g></g><switch><g requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"/><a transform="translate(0,-5)" xlink:href="https://www.diagrams.net/doc/faq/svg-export-text-problems" target="_blank"><text text-anchor="middle" font-size="10px" x="50%" y="100%">Text is not SVG - cannot display</text></a></switch></svg>