---
sidebar_position: 10
---

# 应用分类

| 类型        |  功能需求 | 非功能需求 | 关键点 |
| ---------   | -------  |  -------- | -------  |
| <h4>News Feed</h4>  <ul><li>Twitter</li><li>Instagram</li><li>TikTok</li><li>Pinterest</li><li>RSS 类系统</li></ul>   |  <ul><li>发布图文，视频</li><li>关注，被关注</li><li>浏览信息流</li></ul>        | <ul><li>Read low latency：阅读信息流低延迟</li><li>Consistency：用户关注关系需要在多设备同步。信息流在多设备中顺序保持一致</li><li>High availability：一般性要求</li></ul> | <ul><li>根据用户粉丝数量制定混合策略：Pull, Push, Fanout（[1](https://www.youtube.com/watch?v=WEgCjwyXvwc)）</li><li>使用指针和日志追加型数据库记录多设备读取位置</li><li>Read-Your-Writes Consistency（[1](https://arpitbhayani.me/blogs/read-your-write-consistency), [2](https://docs.oracle.com/cd/E17276_01/html/gsg_db_rep/C/rywc.html)）</li><li>从用户 ID 或者数据 ID 维度进行数据分区（[1](https://www.youtube.com/watch?v=wapi0aR4BZE), [2](https://instagram-engineering.com/sharding-ids-at-instagram-1cf5a71e5a5c), [3](https://www.singlestore.com/blog/database-sharding-vs-partitioning-whats-the-difference/)）</li></ul>   |
| <h4>Share</h4> <ul><li>TinyURL</li><li>Bitly</li><li>Shorby</li><li>Pastebin</li></ul> | <ul><li>对于给定的 URL 可以生成唯一的短 URL</li><li>可以对短 URL 进行定制化，过期设置，分享</li></ul> | <ul><li>Read and Write low latency：生成 URL，URL 重定向时低延迟</li><li>Consistency：每个 URL 对应唯一的短 URL</li><li>Security：URL 无法被猜测，无法访问权限外的 URL</li><li>High availability：一般性要求</li></ul> | <ul><li>预生成短 URL 并存储在消息队列</li><li>使用哈希表对应 URL</li><li>使用 Bloom filter 等方式进行限流（[1](https://freecontent.manning.com/all-about-bloom-filters/)）</li></ul> |
| <h4>GEO Base</h4>  <ul><li>Uber</li><li>Uber Eats</li><li>Grab</li><li>Lyft</li></ul> | <ul><li>用户预约车/食物，匹配对应的司机/商家</li><li>显示用户和司机实时位置</li><li>费用计算以及支付</li></ul>| <ul><li>高匹配度：匹配最合适的服务商（司机，骑手）</li><li>Consistency：同一个订单只会被最合适的一位服务商接到</li><li>High availability：一般性要求</li></ul>  | <ul><li>使用 Geohash 算法，S2 算法提高匹配度（[1](https://medium.com/@bkawk/geohashing-20b282fc9655), [2](https://s2geometry.io/)）</li><li>后端定期更新匹配排名信息</li><li>特定应用协议记录司机实时位置</li><li>使用日志型数据库记录事件方便数据溯源</li></ul> |
| <h4>IM</h4> <ul><li>WhatsApp</li><li>Facebook Messenger</li><li>WeChat</li><li>LINE</li></ul>   | <ul><li>从个人/群组中发送/接受信息</li><li>消息状态（已送达，已读）和用户状态（在线，离线）</li><li>查询历史消息</li></ul>    | <ul><li>Read and Write low latency：收发信息的速度是关键指标</li><li>Consistency：保证消息顺序以及在多端的消息同步</li><li>Security：信息传输安全</li><li>High availability：一般性要求</li></ul>  | <ul><li>特定的应用协议：MQTT, AMQP, XMPP</li><li>消息有序性</li><li>使用指针和日志追加型数据库记录多设备读取位置</li><li>使用点对点加密与安全协议保证信息安全</li></ul> |
| <h4>Live</h4> <ul><li>Facebook Live</li><li>Twitch</li><li>Zoom</li><li>Google Meets</li></ul>   | <ul><li>浏览音视频直播</li><li>发起音视频直播</li><li>对直播评论，点赞</li></ul>    | <ul><li>Read and Write low latency：观看以及发起直播的流畅性</li><li>Scalability：支撑大量直播以及热门直播</li><li>Security：只能访问权限内的视频，浏览过程的数据安全</li><li>High availability：一般性要求</li></ul>  | <ul><li>特定的应用协议进行网络自适应：RTMPS, WebRTC</li><li>资源自动扩容与收缩支持热门直播</li><li>使用多级缓存或者队列服务解决惊群效应</li></ul> |
| <h4>Video</h4>  <ul><li>YouTube</li><li>Netflix</li><li>Disney Plus</li><li>HBO Max</li></ul>   | <ul><li>浏览视频</li><li>发布视频</li><li>对视频评论，点赞</li></ul>   | <ul><li>Read low latency: 观看视频的流畅性</li><li>Scalability：支撑大量视频上传以及观看</li><li>High availability：一般性要求</li></ul> | <ul><li>边缘节点与 CDN 内容分发</li><li>特定应用协议保证网络码率自适应</li><li>热门视频使用多级缓存，缓存预热，缓存淘汰策略</li><li>资源自动扩容与收缩支持视频处理</li><li>工作服务器可以使用 Serverless，Map Reduce 等策略进行视频处理</li></ul> |
| <h4>File Sync</h4> <ul><li>Google Drive</li><li>Dropbox</li><li>Sync.Com</li><li>iDrive</li></ul>   | <ul><li>上传，更新及下载文件（包括离线状态）</li><li>文件共享</li><li>多客户端同步</li></ul> | <ul><li>Read and Write low latency：上传，更新及下载文件的速度</li><li>Consistency：多客户端同步文件，保证文件一致性</li><li>Scalability：文件大数量多的情况下保持高效</li></ul> | <ul><li>使用 Rsync 算法对文件进行增量更新</li><li>使用异步上传，分片上传等方式提高更新效率</li><li>文件更新可能出现循环依赖</li></ul>  | 
| <h4>Search</h4>  <ul><li>Google Search</li><li>Bing</li><li>Airbnb Search</li><li>Twitter Search</li></ul> | <ul><li>搜索文字，获得搜索建议</li><li>针对特定类别进行搜索（图片，地点，视频，新闻）</li></ul>  | <ul><li>Read low latency：搜索以及搜索建议时低延迟</li><li>高匹配度：返回最匹配的搜索结果</li><li>Scalability：支撑大量搜索</li></ul> | <ul><li>匹配：使用 Trie 与 Reverse Index 提高文字匹配度</li><li>排名：NLP 语义分析，PageRank, Panda algorithm </li><li>缓存热门搜索结果</li><li>使用图数据库进行多类别搜索</li></ul> |
| <h4>Ranking</h4> <ul><li>Twitter Top Hashtags</li><li>Spotify Top K Music</li></ul>  | <ul><li>显示排名</li><li>排名动态更新</li></ul>| <ul><li>Read low latency：显示排名低延迟</li><li>Scalability：大量数据下高效显示排名以及动态更新</li></ul> | <ul><li>对排名进行预计算，根据业务时间要求更新</li><li>对大量更新事务进行合并，改为单一更新事务</li><li>使用 Lossy Counting Method，Buckets with Global Query 近似统计</li></ul> |
| <h4>Trading</h4>  <ul><li>Robinhood</li><li>Webull</li><li>TradeStation</li></ul>   | <ul><li>浏览股票行情</li><li>股票买卖</li></ul>| <ul><li>Read and Write low latency：股票行情更新以及股票买卖低延迟</li><li>Consistency：股票买卖时提供强一致性</li><li>High availability：一般性要求</li></ul> | <ul><li>强一致性：使用消息队列，乐观锁与悲观锁</li><li>保持操作幂等，提供事务回滚</li></ul> |
| <h4>Cooperative editing</h4> <ul><li>Google Docs</li><li>Microsoft Office Online</li><li>Quip</li></ul>   | <ul><li>多人编辑，评论文档</li><li>版本回滚</li><li>文档权限管理</li></ul> | <ul><li>Read and Write low latency：阅读以及编辑文档低延迟</li><li>Consistency：文档编辑要求强一致性</li><li>High availability：一般性要求</li></ul>      | <ul><li>[Operational transformation](https://drive.googleblog.com/2010/05/whats-different-about-new-google-docs.html)</li><li>[Making collaboration fast](https://drive.googleblog.com/2010/09/whats-different-about-new-google-docs.html)</li></ul> |
| <h4>Booking</h4> <ul><li>Google Calendar</li><li>Ticketmaster</li><li>StubHub</li></ul>  | <ul><li>设置空闲时间</li><li>预约空闲时间以及更新预约</li></ul> | <ul><li>Consistency：预约要求强一致性（某个时间段同时只能被预约一次）</li><li>High availability：一般性要求</li></ul> | <ul><li>Write Skew 和 Phantoms</li><li>分布式事务：XA 协议，Seata</li></ul>  |
| <h4>Shopping</h4> <ul><li>Amazon</li><li>eBay</li><li>Etsy</li><li>AliExpress</li></ul> | <ul><li>浏览商品</li><li>购买商品</li><li>获取商品状态（发货状态，物流状态）</li></ul>  | <ul><li>Consistency：避免重复下单，避免商品超卖少卖</li><li>Security：购物与支付过程的隐私安全以及数据安全</li><li>High availability：大流量多用户下的高可用</li></ul>| <ul><li>强一致性：使用消息队列，乐观锁与悲观锁</li><li>保持操作幂等，提供事务回滚</li><li>服务降级与限流</li></ul> |
| <h4>CPU-bound</h4> <ul><li>LeetCode</li><li>Video Editor</li></ul>  | <ul><li>进行计算密集型任务处理</li><li>获得处理结果以及历史记录</li></ul> | <ul><li>尽快返回结果：对任务进行分块处理，边处理边返回已处理的结果</li><li>Scalability：支撑大量任务同时高效处理</li></ul>  | <ul><li>使用 Serverless 减少系统复杂度</li>使用 divide and conquer ，map reduce 策略将任务进行分解<li>异步处理任务，完成后再进行通知</li></ul> |
| <h4>Infrastructure</h4> <ul><li>Message queue</li><li>Object Storage</li><li>Logging</li><li>Monitoring</li></ul> | <ul><li>提供基础功能给业务系统如存储，消息推送，监控</li></ul>  | <ul><li>Scalability：容易使用以及扩展，支撑大量请求</li><li>High availability：基础组件要求尽量高可用</li></ul>| <ul><li>冗余备份（replication）以及快速恢复（failover）</li></ul> |
