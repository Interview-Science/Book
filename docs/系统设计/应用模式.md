---
sidebar_position: 30
---

# 应用与设计模式


| Type        |  Keypoints | Patterns   |
| ---------   | -------  |  --------  |
| <h4>News Feed</h4>  <ul><li>Twitter</li><li>Instagram</li><li>TikTok</li><li>Pinterest</li><li>RSS</li></ul>    | <ul><li>Use a fan-out / fan-in strategy for feed updates to enhance availability ([1](https://www.youtube.com/watch?v=WEgCjwyXvwc))</li><li>Read-Your-Writes Consistency ([1](https://arpitbhayani.me/blogs/read-your-write-consistency), [2](https://docs.oracle.com/cd/E17276_01/html/gsg_db_rep/C/rywc.html))</li><li>Maintain data replication across servers for consistency([1](https://www.youtube.com/watch?v=wapi0aR4BZE), [2](https://instagram-engineering.com/sharding-ids-at-instagram-1cf5a71e5a5c), [3](https://www.singlestore.com/blog/database-sharding-vs-partitioning-whats-the-difference/))</li></ul>   | <ul><li>Fan-Out / Fan-In Strategy: <ul><li>Distribute a new post to all follower feeds (fan-out); aggregate feeds when users log in (fan-in)</li></ul></li><li>Event Sourcing Pattern: <ul><li>Store changes to the news feed as events, ensuring all writes are recorded for user consistency</li><li>Replay events to rebuild user feed state in case of server failure, ensuring data consistency</li></ul></li><li>Sharding Pattern: <ul><li>Shard news feed data by user region to distribute load and reduce latency</li><li>Shard by user activity level, placing more active users on high-performance shards to balance load</li></ul></li></ul> |
| <h4>Share</h4> <ul><li>TinyURL</li><li>Bitly</li><li>Shorby</li><li>Pastebin</li></ul> | <ul><li>Pregenerate URLs for later use</li><li>Implement caching for frequent redirects to reduce latency ([1](https://docs.aws.amazon.com/whitepapers/latest/database-caching-strategies-using-redis/caching-patterns.html))</li><li>Apply rate limiting and validation to enhance security([1](https://freecontent.manning.com/all-about-bloom-filters/))</li></ul> | <ul><li>Cache-Aside Pattern: <ul><li>Cache frequently accessed short URLs to speed up redirect requests</li><li>Evict expired URLs from cache to ensure users are redirected correctly</li></ul></li><li>Rate Limiting Pattern: <ul><li>Limit URL creation requests to prevent abuse and ensure fair usage</li><li>Apply rate limiting on redirects to prevent DDoS attacks on popular URLs</li></ul></li><li>Publisher-Subscriber Pattern: <ul><li>Notify caching systems to evict or preload URLs when new ones are pregenerated</li></ul></li></ul> |
| <h4>GEO Base</h4>  <ul><li>Uber</li><li>Uber Eats</li><li>Grab</li><li>Lyft</li></ul> | <ul><li>Implement efficient matching algorithms for low latency（[1](https://medium.com/@bkawk/geohashing-20b282fc9655), [2](https://s2geometry.io/)）</li><li>Use GPS data for location tracking</li><li>Use log database to record events to facilitate data traceability</li></ul> | <ul><li>Geode Pattern: <ul><li>Use geodes to efficiently match riders with nearby drivers for low latency</li><li>Store and index GPS data geospatially for quick location-based queries</li></ul></li><li>Event Sourcing Pattern: <ul><li>Record all ride-related events for full traceability of the system's state</li><li>Use events to reconstruct a trip's state in case of disputes or audits</li></ul></li><li>Saga Distributed Transactions Pattern: <ul><li>Manage complex transactions like booking, payment, and confirmation across services</li><li>Ensure consistency in distributed systems when riders cancel or change routes</li></ul></li></ul> |
| <h4>IM</h4> <ul><li>WhatsApp</li><li>Facebook Messenger</li><li>WeChat</li><li>LINE</li></ul> | <ul><li>efficient messaging protocols like XMPP ([1](https://www.cometchat.com/blog/whatsapps-architecture-and-system-design))</li><li>Ensure data consistency with eventual consistency model</li><li>Encrypt messages for security ([1](https://signal.org/blog/how-to-build-encrypted-group-calls/))</li></ul> | <ul><li>Valet Key Pattern: <ul><li>Give clients temporary keys to upload/download attachments securely</li><li>Use keys to authenticate WebSocket/XMPP connections for sending/receiving messages</li></ul></li></ul> |





