<?xml version="1.0" encoding="UTF-8"?>
<!-- Do not edit this file with editors other than diagrams.net -->
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" width="1542px" height="1826px" viewBox="-0.5 -0.5 1542 1826" content="&lt;mxfile host=&quot;app.diagrams.net&quot; modified=&quot;2022-11-30T08:22:54.047Z&quot; agent=&quot;5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/107.0.0.0 Safari/537.36&quot; etag=&quot;931At9zawt6Rwy2Q2aJs&quot; version=&quot;20.6.0&quot; type=&quot;device&quot;&gt;&lt;diagram id=&quot;fquYvqDQM7D5qFL4WG2h&quot; name=&quot;Page-1&quot;&gt;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&lt;/diagram&gt;&lt;/mxfile&gt;" style="background-color: rgb(255, 255, 255);"><defs/><g><rect x="0" y="0" width="500" height="200" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 484px; height: 1px; padding-top: 7px; margin-left: 9px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: left;"><div style="display: inline-block; font-size: 14px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;"><p style="line-height: 0.9; font-size: 14px;"></p><div style="font-size: 14px;"><b>Functional</b></div><div style="font-size: 14px;">1. 预订日程表的可用时间段</div><div style="font-size: 14px;">2. 预订门票</div><div style="font-size: 14px;"><br /></div><div style="font-size: 14px;"><br /></div><div style="font-size: 14px;"><b>Non-functional</b></div><div style="font-size: 14px;">1. High Consistency: <span style="background-color: initial;">预订要求强一致性（某个资源只能被预订一次）</span></div><div style="font-size: 14px;">2. High Availability: 确保整个系统的高可用</div><div style="font-size: 14px;">3. High Scalability: 确保整个系统的高扩展性</div><br /><p style="font-size: 14px;"></p></div></div></div></foreignObject><text x="9" y="21" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="14px">Functional...</text></switch></g><rect x="0" y="210" width="500" height="160" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 484px; height: 1px; padding-top: 217px; margin-left: 9px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: left;"><div style="display: inline-block; font-size: 14px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;"><p style="line-height: 0.9; font-size: 14px;"></p><div style=""><div style=""><div style=""><b>Capacity Estimation (Optional)</b><br /></div><div style=""><b><br /></b></div><div style=""><b>QPS</b></div><div style="font-size: 14px;">假设：</div><div style="font-size: 14px;"><span style="white-space: pre;">	</span>峰值每分钟一百万用户预订 1,000 个资源</div><div style="font-size: 14px;">结论：</div><div style="font-size: 14px;"><span style="white-space: pre;">	</span>系统大约需要支撑 20,000 QPS<span style="background-color: initial;"> </span></div><div style="font-size: 14px;"><br /></div><div style="font-size: 14px;"><br /></div><div style=""><span style="background-color: initial;"><b><br /></b></span></div><div style="font-size: 14px;"><span style="background-color: initial;"> </span></div></div></div><p style="font-size: 14px;"></p></div></div></div></foreignObject><text x="9" y="231" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="14px">Capacity Estimation (Optional)...</text></switch></g><rect x="0" y="380" width="500" height="370" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 484px; height: 1px; padding-top: 387px; margin-left: 9px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: left;"><div style="display: inline-block; font-size: 14px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;"><p style="line-height: 0.9; font-size: 14px;"></p><div style=""><div style=""><div style=""><b style="background-color: initial;">练习与总结</b></div><div style=""><b style="background-color: initial;"><br /></b></div><div style=""><b style="background-color: initial;">Key points</b><br /></div><div style=""><div>- 脏读，幻读，写倾斜</div><div>- 分布式事务：XA 协议，Seata</div><div>- 事务补偿以及回滚</div><div><br /></div><div><div><b>Real Life Architectures</b></div><div><span style="background-color: initial;">- Blog: </span><span style="background-color: initial;">海外兔是如何设计秒杀系统的</span></div></div><div><br /></div></div><div><div><b style="background-color: initial;">Patterns</b><br /></div><div>- <span style="background-color: initial;">Event Sourcing pattern</span><span style="background-color: initial;">: 将每次预订当成一个事件进行处理</span></div></div><div><span style="background-color: initial;">- </span><span style="background-color: initial;">Rate Limiting pattern: 特定情况下对系统进行降级以及限流</span></div><div><span style="background-color: initial;">- </span><span style="background-color: initial;">Compensating Transaction pattern</span><span style="background-color: initial;">: 预订过程失败后，进行事务补偿</span></div><div><span style="background-color: initial;">- </span><span style="background-color: initial;">Saga distributed transactions pattern: 保证在微服务中的事务一致性</span></div><div style=""><br /></div><div><br /></div><div><div><b>Similar applications</b></div><div>- Shopping: 常规购物系统也会有类似的流程和关键点</div></div></div></div><p style="font-size: 14px;"></p></div></div></div></foreignObject><text x="9" y="401" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="14px">练习与总结Key points...</text></switch></g><rect x="510" y="0" width="1030" height="930" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="all"/><rect x="0" y="760" width="500" height="650" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 491px; height: 1px; padding-top: 767px; margin-left: 9px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: left;"><div style="display: inline-block; font-size: 14px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;"><p style="line-height: 0.9; font-size: 14px;"></p><div style="font-size: 16px;"><div style=""><div style=""><b>API Design</b></div><div style=""><b><br /></b></div><div style="">method: GET</div><div style="">https://example.com/api/v1/resource/</div><div style=""><b><br /></b></div><div style=""><div>get_resources(user_id, timestamp)</div><div><span style="white-space: pre;">	</span>resources = get_from_mixer(user_id, timestamp)<br /></div><div><span style="">	</span><span style="">	</span><span style="">	</span><span style="white-space: pre;">	</span>queue.process(resources, user_id, timestamp)</div><div>        return resources</div><div><br /></div><div><div>method: POST</div><div>https://example.com/api/v1/resource/</div></div><div><br /></div></div><div style="">book_resource(user_id, timestamp, resource_id)</div><div style=""><span style="">	</span><span style="">	</span><span style="">	</span><span style="">	</span><span style="">	</span><span style="">	</span><span style="">	</span><span style="white-space: pre;">	</span>try:</div><div style="">            select_and_update(resource_id, user_id, timestamp)</div><div style="">        except:</div><div style="">            return status</div><div style="">        return status</div><div style=""><br /></div><div style=""><br /></div></div></div><div style="font-size: 16px;"><div style=""><div style=""><span style="background-color: initial;"><span style="">	</span></span></div><div style=""><br /></div><div style=""><span style="background-color: initial;"><br /></span></div><div style=""><span style="background-color: initial;"><br /></span></div><div style=""><span style="">	</span><span style="">	</span><br /></div></div></div><p style="font-size: 14px;"></p></div></div></div></foreignObject><text x="9" y="781" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="14px">API Design...</text></switch></g><rect x="510" y="940" width="1030" height="470" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 1021px; height: 1px; padding-top: 947px; margin-left: 519px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: left;"><div style="display: inline-block; font-size: 14px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;"><p style="line-height: 0.9; font-size: 14px;"></p><div style=""><div style=""><div style=""><br /></div></div></div><p style="font-size: 14px;"></p></div></div></div></foreignObject><text x="519" y="961" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="14px">...</text></switch></g><rect x="0" y="1420" width="1540" height="340" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 1531px; height: 1px; padding-top: 1427px; margin-left: 9px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: left;"><div style="display: inline-block; font-size: 14px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;"><p style="line-height: 0.9; font-size: 14px;"></p><div style=""><div style=""><div style=""><font style="font-size: 14px;"><b>  </b></font><b style="background-color: initial;">Explain</b></div><div style=""><b style="background-color: initial;"><br /></b></div><div style=""><b style="background-color: initial;"> </b><span style="background-color: initial;"> 1.</span><span style="background-color: initial;">什么时候扣除库存，是下单后扣除库存还是支付后扣除库存呢？为什么？</span></div><div><span style="background-color: initial;">    在下单的时候扣除库存，如果在支付成功再扣除库存的话会出现下单请求成功数量大于库存的情况。</span><br /></div><div><br /></div><div>  2. 对秒杀商品进行分库分表之后可能导致某个分表库存为零，但其他分表还有库存，如何解决这个问题？</div><div><span style="background-color: initial;">  有三种解决方案：</span></div><div>    2.1 如果当前分表没有库存的话，到其他分表进行重试，缺点是会放大流量。</div><div>    2.2 通过路由组件记录每个分表的库存情况，将下单请求转发到有库存的分表中。</div><div>    2.3 使用分布式缓存记录每个分表的库存情况，并且每次下单请求只更新缓存，缓存后续再更新到数据库中，缺点是可能出现缓存和数据库不一致的问题。”</div><div><br /></div><div>  3. 客户下单后可能支付超时并释放库存，这时候有哪些要注意的？</div><div>    服务器能够通知限流器以及前端库存发生变化，限流器能够重新接收请求，前端页面显示可下单的页面，确保后续的用户能继续购买商品。</div><div><br /></div><div>  4. 如果电商系统流量过大，如何进行降级服务？</div><div><span style="background-color: initial;">    1. 暂停非核心业务：例如淘宝在双十一会暂时关闭退款功能。</span><br /></div><div>    2. 拒绝服务：当系统压力到达一个阈值的的时候，随机丢弃部分秒杀请求。</div><div>    3. 减少重试：将重试次数降低甚至设置为0，否则容易造成雪崩效应，系统陷入负反馈循环，无法正常恢复。</div><div><br /></div><div style=""><span style="background-color: initial;">      </span></div><div style=""><span style="background-color: initial;">      </span></div><div><span style="background-color: initial;"><br /></span></div></div></div><p style="font-size: 14px;"></p></div></div></div></foreignObject><text x="9" y="1441" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="14px">Explain...</text></switch></g><path d="M 630 235 L 675.85 235" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 681.1 235 L 674.1 238.5 L 675.85 235 L 674.1 231.5 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/><ellipse cx="590" cy="235" rx="40" ry="40" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 78px; height: 1px; padding-top: 235px; margin-left: 551px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 14px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">Client</div></div></div></foreignObject><text x="590" y="239" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="14px" text-anchor="middle">Client</text></switch></g><path d="M 802.22 235 L 863.63 235" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 868.88 235 L 861.88 238.5 L 863.63 235 L 861.88 231.5 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/><path d="M 742.18 205 L 742.18 105.09 L 873.63 105" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 878.88 105 L 871.88 108.51 L 873.63 105 L 871.88 101.51 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/><rect x="682.22" y="205" width="120" height="60" rx="13.2" ry="13.2" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 235px; margin-left: 683px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 14px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">API Gateway</div></div></div></foreignObject><text x="742" y="239" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="14px" text-anchor="middle">API Gateway</text></switch></g><rect x="533.4" y="20" width="128.75" height="30" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 127px; height: 1px; padding-top: 35px; margin-left: 534px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 16px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; font-weight: bold; white-space: normal; overflow-wrap: normal;">浏览</div></div></div></foreignObject><text x="598" y="40" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="16px" text-anchor="middle" font-weight="bold">浏览</text></switch></g><rect x="520" y="370" width="1010" height="70" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 994px; height: 1px; padding-top: 377px; margin-left: 529px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: left;"><div style="display: inline-block; font-size: 14px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;"><p style="line-height: 0.9; font-size: 14px;"></p><div style=""><div style=""><div style="">1. Client 浏览资源时，该请求会发送到 Queue，Event Server 订阅了浏览事件，并且通过 Data analysis 系统更新推荐的资源到 Resources Mixer</div><div style="">2. Client 浏览资源时，<span style="text-align: center; background-color: initial;">Resources Mixer 会整合资源信息，用户偏好，广告系统等内容返回资源列表</span></div><div style=""><br /></div><div style="font-size: 14px;"><br /></div></div></div><p style="font-size: 14px;"></p></div></div></div></foreignObject><text x="529" y="391" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="14px">1. Client 浏览资源时，该请求会发送到 Queue，Event Server 订阅了浏览事件，并且通过 Data analysis 系统更新推荐的资源到 Resources Mixer...</text></switch></g><path d="M 990 235 L 1033.63 235" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 1038.88 235 L 1031.88 238.5 L 1033.63 235 L 1031.88 231.5 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/><rect x="870" y="205" width="120" height="60" rx="13.2" ry="13.2" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 235px; margin-left: 871px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 14px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">Resources Mixer</div></div></div></foreignObject><text x="930" y="239" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="14px" text-anchor="middle">Resources Mixer</text></switch></g><path d="M 1160 105 L 1213.63 105" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 1218.88 105 L 1211.88 108.5 L 1213.63 105 L 1211.88 101.5 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/><rect x="1040" y="75" width="120" height="60" rx="13.2" ry="13.2" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 105px; margin-left: 1041px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 14px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">Event Server</div></div></div></foreignObject><text x="1100" y="109" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="14px" text-anchor="middle">Event Server</text></switch></g><path d="M 1275.09 150 L 1275.09 170 L 930 170 L 930 198.63" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 930 203.88 L 926.5 196.88 L 930 198.63 L 933.5 196.88 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/><path d="M 1220 75 C 1220 66.72 1244.62 60 1275 60 C 1289.59 60 1303.58 61.58 1313.89 64.39 C 1324.21 67.21 1330 71.02 1330 75 L 1330 135 C 1330 143.28 1305.38 150 1275 150 C 1244.62 150 1220 143.28 1220 135 Z" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/><path d="M 1330 75 C 1330 83.28 1305.38 90 1275 90 C 1244.62 90 1220 83.28 1220 75" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 108px; height: 1px; padding-top: 119px; margin-left: 1221px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 14px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">Data analysis</div></div></div></foreignObject><text x="1275" y="123" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="14px" text-anchor="middle">Data analysis</text></switch></g><path d="M 980 105 L 1033.63 105" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 1038.88 105 L 1031.88 108.5 L 1033.63 105 L 1031.88 101.5 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/><path d="M 870 135 L 890 75 L 990 75 L 970 135 Z" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 105px; margin-left: 871px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 14px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">Queue</div></div></div></foreignObject><text x="930" y="109" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="14px" text-anchor="middle">Queue</text></switch></g><path d="M 1220 205 C 1220 196.72 1244.62 190 1275 190 C 1289.59 190 1303.58 191.58 1313.89 194.39 C 1324.21 197.21 1330 201.02 1330 205 L 1330 265 C 1330 273.28 1305.38 280 1275 280 C 1244.62 280 1220 273.28 1220 265 Z" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/><path d="M 1330 205 C 1330 213.28 1305.38 220 1275 220 C 1244.62 220 1220 213.28 1220 205" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 108px; height: 1px; padding-top: 249px; margin-left: 1221px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 14px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">Database</div></div></div></foreignObject><text x="1275" y="253" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="14px" text-anchor="middle">Database</text></switch></g><path d="M 1160 235 L 1213.63 235" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 1218.88 235 L 1211.88 238.5 L 1213.63 235 L 1211.88 231.5 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/><rect x="1040" y="205" width="120" height="60" rx="13.2" ry="13.2" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 235px; margin-left: 1041px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 14px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">Resources Info</div></div></div></foreignObject><text x="1100" y="239" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="14px" text-anchor="middle">Resources Info</text></switch></g><path d="M 640 705 L 685.85 705" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 691.1 705 L 684.1 708.5 L 685.85 705 L 684.1 701.5 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/><ellipse cx="600" cy="705" rx="40" ry="40" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 78px; height: 1px; padding-top: 705px; margin-left: 561px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 14px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">Client</div></div></div></foreignObject><text x="600" y="709" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="14px" text-anchor="middle">Client</text></switch></g><path d="M 812.22 705 L 873.63 705" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 878.88 705 L 871.88 708.5 L 873.63 705 L 871.88 701.5 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/><path d="M 752.18 675 L 752.18 575.09 L 883.63 575" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 888.88 575 L 881.88 578.51 L 883.63 575 L 881.88 571.51 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/><rect x="692.22" y="675" width="120" height="60" rx="13.2" ry="13.2" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 705px; margin-left: 693px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 14px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">API Gateway</div></div></div></foreignObject><text x="752" y="709" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="14px" text-anchor="middle">API Gateway</text></switch></g><rect x="543.4" y="490" width="128.75" height="30" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 127px; height: 1px; padding-top: 505px; margin-left: 544px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 16px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; font-weight: bold; white-space: normal; overflow-wrap: normal;">预订</div></div></div></foreignObject><text x="608" y="510" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="16px" text-anchor="middle" font-weight="bold">预订</text></switch></g><rect x="530" y="840" width="1010" height="70" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 994px; height: 1px; padding-top: 847px; margin-left: 539px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: left;"><div style="display: inline-block; font-size: 14px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;"><p style="line-height: 0.9; font-size: 14px;"></p><div style=""><div style=""><div style="">1. Client 预订资源时，<span style="background-color: initial;">该请求会发送到 Queue，Event Server 订阅了预订事件，并且通过 Data analysis 系统更新推荐的资源</span></div><div style="">2. Client 预订资源时，<span style="text-align: center; background-color: initial;">Resources Server 会查询并且更新数据库</span></div><div style=""><br /></div><div style="font-size: 14px;"><br /></div></div></div><p style="font-size: 14px;"></p></div></div></div></foreignObject><text x="539" y="861" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="14px">1. Client 预订资源时，该请求会发送到 Queue，Event Server 订阅了预订事件，并且通过 Data analysis 系统更新推荐的资源...</text></switch></g><path d="M 1000 705 L 1048.63 705" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 1053.88 705 L 1046.88 708.5 L 1048.63 705 L 1046.88 701.5 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/><rect x="880" y="675" width="120" height="60" rx="13.2" ry="13.2" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 705px; margin-left: 881px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 14px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">Resources Server</div></div></div></foreignObject><text x="940" y="709" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="14px" text-anchor="middle">Resources Server</text></switch></g><path d="M 1170 575 L 1223.63 575" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 1228.88 575 L 1221.88 578.5 L 1223.63 575 L 1221.88 571.5 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/><rect x="1050" y="545" width="120" height="60" rx="13.2" ry="13.2" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 575px; margin-left: 1051px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 14px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">Event Server</div></div></div></foreignObject><text x="1110" y="579" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="14px" text-anchor="middle">Event Server</text></switch></g><path d="M 1230 545 C 1230 536.72 1254.62 530 1285 530 C 1299.59 530 1313.58 531.58 1323.89 534.39 C 1334.21 537.21 1340 541.02 1340 545 L 1340 605 C 1340 613.28 1315.38 620 1285 620 C 1254.62 620 1230 613.28 1230 605 Z" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/><path d="M 1340 545 C 1340 553.28 1315.38 560 1285 560 C 1254.62 560 1230 553.28 1230 545" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 108px; height: 1px; padding-top: 589px; margin-left: 1231px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 14px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">Data analysis</div></div></div></foreignObject><text x="1285" y="593" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="14px" text-anchor="middle">Data analysis</text></switch></g><path d="M 990 575 L 1043.63 575" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 1048.88 575 L 1041.88 578.5 L 1043.63 575 L 1041.88 571.5 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/><path d="M 880 605 L 900 545 L 1000 545 L 980 605 Z" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 575px; margin-left: 881px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 14px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">Queue</div></div></div></foreignObject><text x="940" y="579" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="14px" text-anchor="middle">Queue</text></switch></g><path d="M 1055 675 C 1055 666.72 1079.62 660 1110 660 C 1124.59 660 1138.58 661.58 1148.89 664.39 C 1159.21 667.21 1165 671.02 1165 675 L 1165 735 C 1165 743.28 1140.38 750 1110 750 C 1079.62 750 1055 743.28 1055 735 Z" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/><path d="M 1165 675 C 1165 683.28 1140.38 690 1110 690 C 1079.62 690 1055 683.28 1055 675" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 108px; height: 1px; padding-top: 719px; margin-left: 1056px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 14px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">Database</div></div></div></foreignObject><text x="1110" y="723" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="14px" text-anchor="middle">Database</text></switch></g><path d="M 530 1000 L 530 970 L 1517.5 970 L 1517.5 1000" fill="rgb(255, 255, 255)" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><path d="M 530 1000 L 530 1240 L 1517.5 1240 L 1517.5 1000" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 530 1000 L 1517.5 1000" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 530 1040 L 858 1040 L 1187 1040 L 1518 1040" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 530 1080 L 858 1080 L 1187 1080 L 1518 1080" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 530 1120 L 858 1120 L 1187 1120 L 1518 1120" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 530 1160 L 858 1160 L 1187 1160 L 1518 1160" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 530 1200 L 858 1200 L 1187 1200 L 1518 1200" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 858 1000 L 858 1040 L 858 1080 L 858 1120 L 858 1160 L 858 1200 L 858 1240" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 1187 1000 L 1187 1040 L 1187 1080 L 1187 1120 L 1187 1160 L 1187 1200 L 1187 1240" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g fill="rgb(0, 0, 0)" font-family="Helvetica" font-weight="bold" pointer-events="none" text-anchor="middle" font-size="14px"><text x="1023.25" y="990.5">Resources (SQL)</text></g><path d="M 530 1000 M 858 1000 M 858 1040 M 530 1040" fill="none" stroke="#999999" stroke-linecap="square" stroke-miterlimit="10" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 326px; height: 1px; padding-top: 1020px; margin-left: 531px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center; max-height: 36px; overflow: hidden;"><div style="display: inline-block; font-size: 14px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: none; white-space: normal; overflow-wrap: normal;">Name</div></div></div></foreignObject><text x="694" y="1024" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="14px" text-anchor="middle">Name</text></switch></g><path d="M 858 1000 M 1187 1000 M 1187 1040 M 858 1040" fill="none" stroke="#999999" stroke-linecap="square" stroke-miterlimit="10" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 327px; height: 1px; padding-top: 1020px; margin-left: 859px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center; max-height: 36px; overflow: hidden;"><div style="display: inline-block; font-size: 14px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: none; white-space: normal; overflow-wrap: normal;">Type</div></div></div></foreignObject><text x="1022" y="1024" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="14px" text-anchor="middle">Type</text></switch></g><path d="M 1187 1000 M 1518 1000 M 1518 1040 M 1187 1040" fill="none" stroke="#999999" stroke-linecap="square" stroke-miterlimit="10" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 329px; height: 1px; padding-top: 1020px; margin-left: 1188px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center; max-height: 36px; overflow: hidden;"><div style="display: inline-block; font-size: 14px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: none; white-space: normal; overflow-wrap: normal;">Note</div></div></div></foreignObject><text x="1352" y="1024" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="14px" text-anchor="middle">Note</text></switch></g><path d="M 530 1040 M 858 1040 M 858 1080 M 530 1080" fill="none" stroke="#999999" stroke-linecap="square" stroke-miterlimit="10" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 326px; height: 1px; padding-top: 1060px; margin-left: 531px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center; max-height: 36px; overflow: hidden;"><div style="display: inline-block; font-size: 14px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: none; white-space: normal; overflow-wrap: normal;">resource_id</div></div></div></foreignObject><text x="694" y="1064" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="14px" text-anchor="middle">resource_id</text></switch></g><path d="M 858 1040 M 1187 1040 M 1187 1080 M 858 1080" fill="none" stroke="#999999" stroke-linecap="square" stroke-miterlimit="10" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 327px; height: 1px; padding-top: 1060px; margin-left: 859px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center; max-height: 36px; overflow: hidden;"><div style="display: inline-block; font-size: 14px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: none; white-space: normal; overflow-wrap: normal;">UUID</div></div></div></foreignObject><text x="1022" y="1064" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="14px" text-anchor="middle">UUID</text></switch></g><path d="M 1187 1040 M 1518 1040 M 1518 1080 M 1187 1080" fill="none" stroke="#999999" stroke-linecap="square" stroke-miterlimit="10" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 329px; height: 1px; padding-top: 1060px; margin-left: 1188px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center; max-height: 36px; overflow: hidden;"><div style="display: inline-block; font-size: 14px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: none; white-space: normal; overflow-wrap: normal;">Primary key</div></div></div></foreignObject><text x="1352" y="1064" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="14px" text-anchor="middle">Primary key</text></switch></g><path d="M 530 1080 M 858 1080 M 858 1120 M 530 1120" fill="none" stroke="#999999" stroke-linecap="square" stroke-miterlimit="10" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 326px; height: 1px; padding-top: 1100px; margin-left: 531px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center; max-height: 36px; overflow: hidden;"><div style="display: inline-block; font-size: 14px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: none; white-space: normal; overflow-wrap: normal;"><div>inventory</div></div></div></div></foreignObject><text x="694" y="1104" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="14px" text-anchor="middle">inventory</text></switch></g><path d="M 858 1080 M 1187 1080 M 1187 1120 M 858 1120" fill="none" stroke="#999999" stroke-linecap="square" stroke-miterlimit="10" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 327px; height: 1px; padding-top: 1100px; margin-left: 859px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center; max-height: 36px; overflow: hidden;"><div style="display: inline-block; font-size: 14px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: none; white-space: normal; overflow-wrap: normal;">INT</div></div></div></foreignObject><text x="1022" y="1104" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="14px" text-anchor="middle">INT</text></switch></g><path d="M 1187 1080 M 1518 1080 M 1518 1120 M 1187 1120" fill="none" stroke="#999999" stroke-linecap="square" stroke-miterlimit="10" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 329px; height: 1px; padding-top: 1100px; margin-left: 1188px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center; max-height: 36px; overflow: hidden;"><div style="display: inline-block; font-size: 14px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: none; white-space: normal; overflow-wrap: normal;"><span style="background-color: initial;">number of </span><span style="background-color: initial;">inventory<br /></span></div></div></div></foreignObject><text x="1352" y="1104" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="14px" text-anchor="middle">number of inventory&#xa;</text></switch></g><path d="M 530 1120 M 858 1120 M 858 1160 M 530 1160" fill="none" stroke="#999999" stroke-linecap="square" stroke-miterlimit="10" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 326px; height: 1px; padding-top: 1140px; margin-left: 531px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center; max-height: 36px; overflow: hidden;"><div style="display: inline-block; font-size: 14px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: none; white-space: normal; overflow-wrap: normal;">category</div></div></div></foreignObject><text x="694" y="1144" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="14px" text-anchor="middle">category</text></switch></g><path d="M 858 1120 M 1187 1120 M 1187 1160 M 858 1160" fill="none" stroke="#999999" stroke-linecap="square" stroke-miterlimit="10" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 327px; height: 1px; padding-top: 1140px; margin-left: 859px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center; max-height: 36px; overflow: hidden;"><div style="display: inline-block; font-size: 14px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: none; white-space: normal; overflow-wrap: normal;">FK</div></div></div></foreignObject><text x="1022" y="1144" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="14px" text-anchor="middle">FK</text></switch></g><path d="M 1187 1120 M 1518 1120 M 1518 1160 M 1187 1160" fill="none" stroke="#999999" stroke-linecap="square" stroke-miterlimit="10" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 329px; height: 1px; padding-top: 1140px; margin-left: 1188px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center; max-height: 36px; overflow: hidden;"><div style="display: inline-block; font-size: 14px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: none; white-space: normal; overflow-wrap: normal;">the category of the resource</div></div></div></foreignObject><text x="1352" y="1144" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="14px" text-anchor="middle">the category of the resource</text></switch></g><path d="M 530 1160 M 858 1160 M 858 1200 M 530 1200" fill="none" stroke="#999999" stroke-linecap="square" stroke-miterlimit="10" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 326px; height: 1px; padding-top: 1180px; margin-left: 531px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center; max-height: 36px; overflow: hidden;"><div style="display: inline-block; font-size: 14px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: none; white-space: normal; overflow-wrap: normal;">meta_data</div></div></div></foreignObject><text x="694" y="1184" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="14px" text-anchor="middle">meta_data</text></switch></g><path d="M 858 1160 M 1187 1160 M 1187 1200 M 858 1200" fill="none" stroke="#999999" stroke-linecap="square" stroke-miterlimit="10" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 327px; height: 1px; padding-top: 1180px; margin-left: 859px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center; max-height: 36px; overflow: hidden;"><div style="display: inline-block; font-size: 14px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: none; white-space: normal; overflow-wrap: normal;">Multiple</div></div></div></foreignObject><text x="1022" y="1184" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="14px" text-anchor="middle">Multiple</text></switch></g><path d="M 1187 1160 M 1518 1160 M 1518 1200 M 1187 1200" fill="none" stroke="#999999" stroke-linecap="square" stroke-miterlimit="10" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 329px; height: 1px; padding-top: 1180px; margin-left: 1188px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center; max-height: 36px; overflow: hidden;"><div style="display: inline-block; font-size: 14px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: none; white-space: normal; overflow-wrap: normal;">name, details, etc.</div></div></div></foreignObject><text x="1352" y="1184" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="14px" text-anchor="middle">name, details, etc.</text></switch></g><path d="M 530 1200 M 858 1200 M 858 1240 M 530 1240" fill="none" stroke="#999999" stroke-linecap="square" stroke-miterlimit="10" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 326px; height: 1px; padding-top: 1220px; margin-left: 531px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center; max-height: 36px; overflow: hidden;"><div style="display: inline-block; font-size: 14px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: none; white-space: normal; overflow-wrap: normal;">meta_data</div></div></div></foreignObject><text x="694" y="1224" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="14px" text-anchor="middle">meta_data</text></switch></g><path d="M 858 1200 M 1187 1200 M 1187 1240 M 858 1240" fill="none" stroke="#999999" stroke-linecap="square" stroke-miterlimit="10" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 327px; height: 1px; padding-top: 1220px; margin-left: 859px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center; max-height: 36px; overflow: hidden;"><div style="display: inline-block; font-size: 14px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: none; white-space: normal; overflow-wrap: normal;">Multiple</div></div></div></foreignObject><text x="1022" y="1224" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="14px" text-anchor="middle">Multiple</text></switch></g><path d="M 1187 1200 M 1518 1200 M 1518 1240 M 1187 1240" fill="none" stroke="#999999" stroke-linecap="square" stroke-miterlimit="10" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 329px; height: 1px; padding-top: 1220px; margin-left: 1188px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center; max-height: 36px; overflow: hidden;"><div style="display: inline-block; font-size: 14px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: none; white-space: normal; overflow-wrap: normal;">name, details, etc.</div></div></div></foreignObject><text x="1352" y="1224" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="14px" text-anchor="middle">name, details, etc.</text></switch></g><path d="M 528.75 1280 L 528.75 1250 L 1518.75 1250 L 1518.75 1280" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><path d="M 528.75 1280 L 528.75 1375 L 1518.75 1375 L 1518.75 1280" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><path d="M 528.75 1280 L 1518.75 1280" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><path d="M 748.75 1280 L 748.75 1305 L 748.75 1335 L 748.75 1365" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><g fill="rgb(0, 0, 0)" font-family="Helvetica" font-weight="bold" pointer-events="none" text-anchor="middle" font-size="14px"><text x="1023.25" y="1270.5">Order (NoSQL)</text></g><path d="M 528.75 1280 M 748.75 1280 M 748.75 1305 M 528.75 1305" fill="none" stroke="rgb(0, 0, 0)" stroke-linecap="square" stroke-miterlimit="10" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 218px; height: 1px; padding-top: 1293px; margin-left: 530px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center; max-height: 21px; overflow: hidden;"><div style="display: inline-block; font-size: 14px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: none; white-space: normal; overflow-wrap: normal;">order_id</div></div></div></foreignObject><text x="639" y="1297" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="14px" text-anchor="middle">order_id</text></switch></g><path d="M 748.75 1280 M 1518.75 1280 M 1518.75 1305 M 748.75 1305" fill="none" stroke="rgb(0, 0, 0)" stroke-linecap="square" stroke-miterlimit="10" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 762px; height: 1px; padding-top: 1293px; margin-left: 757px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: left; max-height: 21px; overflow: hidden;"><div style="display: inline-block; font-size: 14px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: none; white-space: normal; overflow-wrap: normal;">user_id, resource_id_list, state, timestamp</div></div></div></foreignObject><text x="757" y="1297" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="14px">user_id, resource_id_list, state, timestamp</text></switch></g><path d="M 528.75 1305 M 748.75 1305 M 748.75 1335 M 528.75 1335" fill="none" stroke="rgb(0, 0, 0)" stroke-linecap="square" stroke-miterlimit="10" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 218px; height: 1px; padding-top: 1320px; margin-left: 530px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center; max-height: 26px; overflow: hidden;"><div style="display: inline-block; font-size: 14px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: none; white-space: normal; overflow-wrap: normal;">order_id</div></div></div></foreignObject><text x="639" y="1324" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="14px" text-anchor="middle">order_id</text></switch></g><path d="M 748.75 1305 M 1518.75 1305 M 1518.75 1335 M 748.75 1335" fill="none" stroke="rgb(0, 0, 0)" stroke-linecap="square" stroke-miterlimit="10" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 762px; height: 1px; padding-top: 1320px; margin-left: 757px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: left; max-height: 26px; overflow: hidden;"><div style="display: inline-block; font-size: 14px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: none; white-space: normal; overflow-wrap: normal;">user_id, resource_id_list, state, timestamp</div></div></div></foreignObject><text x="757" y="1324" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="14px">user_id, resource_id_list, state, timestamp</text></switch></g><path d="M 528.75 1335 M 748.75 1335 M 748.75 1365 M 528.75 1365" fill="none" stroke="rgb(0, 0, 0)" stroke-linecap="square" stroke-miterlimit="10" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 218px; height: 1px; padding-top: 1350px; margin-left: 530px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center; max-height: 26px; overflow: hidden;"><div style="display: inline-block; font-size: 14px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: none; white-space: normal; overflow-wrap: normal;">order_id</div></div></div></foreignObject><text x="639" y="1354" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="14px" text-anchor="middle">order_id</text></switch></g><path d="M 748.75 1335 M 1518.75 1335 M 1518.75 1365 M 748.75 1365" fill="none" stroke="rgb(0, 0, 0)" stroke-linecap="square" stroke-miterlimit="10" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 762px; height: 1px; padding-top: 1350px; margin-left: 757px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: left; max-height: 26px; overflow: hidden;"><div style="display: inline-block; font-size: 14px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: none; white-space: normal; overflow-wrap: normal;">user_id, resource_id_list, state, timestamp</div></div></div></foreignObject><text x="757" y="1354" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="14px">user_id, resource_id_list, state, timestamp</text></switch></g></g><switch><g requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"/><a transform="translate(0,-5)" xlink:href="https://www.diagrams.net/doc/faq/svg-export-text-problems" target="_blank"><text text-anchor="middle" font-size="10px" x="50%" y="100%">Text is not SVG - cannot display</text></a></switch></svg>